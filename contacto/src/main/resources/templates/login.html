<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	
</head>
<body>
	<div class="container" style="margin-top: 20px">
		<div class="row">
			<div class="col-md-6 col-md-offset-3">
				<form class="form-signin" method="post" th:action="@{/login}">
				  <!-- error message -->
				  <div th:if="${param.error}">
				  		<div class="alert alert-danger">Invalid username or password</div>
				  </div>
				  <!-- ./error message -->
				  <div th:if="${param.logout}">
				  		<div class="alert alert-info">Successfully log out</div> 
				  </div>
				  <div class="form-group">
				    <label for="exampleInputEmail1">Username</label>
				    <input type="text" id="username" name="username" class="form-control" placeholder="Username" required="" autofocus="">
				    <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
				  </div>
				  <div class="form-group">
				    <label for="exampleInputPassword1">Password</label>
				    <input type="password" id="password" name="password" class="form-control" placeholder="Password">
				  </div>
				 <input type="submit" value="login" class="btn btn-primary">
				</form>
			</div>
		</div>
	</div>
<!-- Scripts -->
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
	function login() {
		var url = '/api/auth/login';
		
		var request = {
				'username': $('#username').val(),
				'password': $('#password').val()
		}
		
		console.log(JSON.stringify(request));
		 $.ajax({
				headers : {
					'Content-Type' : 'application/json'
				},
				dataType : 'json',
				data : JSON.stringify(request),
				timeout : 1000,
				type : 'POST',
				url : url
			}).done(function(data, textStatus, jqXHR) {
				console.log(JSON.stringify(data));
			}).fail(function(jqXHR, textStatus, errorThrown) {
				console.log(JSON.stringify(errorThrown));
			});
	}
</script>

</body>
</html>